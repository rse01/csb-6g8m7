{"version":3,"sources":["src/index.js"],"names":["sectors","color","label","rand","m","M","Math","random","tot","length","spinEl","document","querySelector","ctx","getContext","dia","canvas","width","rad","PI","TAU","arc","friction","angVel","ang","getIndex","floor","drawSector","sector","i","save","beginPath","fillStyle","moveTo","lineTo","fill","translate","rotate","textAlign","font","fillText","restore","style","transform","textContent","background","frame","engine","requestAnimationFrame","init","forEach","addEventListener"],"mappings":";AAAA,IAAMA,EAAU,CACd,CAAEC,MAAO,OAAQC,MAAO,QACxB,CAAED,MAAO,OAAQC,MAAO,UACxB,CAAED,MAAO,OAAQC,MAAO,aACxB,CAAED,MAAO,OAAQC,MAAO,WACxB,CAAED,MAAO,OAAQC,MAAO,UACxB,CAAED,MAAO,OAAQC,MAAO,WACxB,CAAED,MAAO,OAAQC,MAAO,aACxB,CAAED,MAAO,UAAWC,MAAO,WAC3B,CAAED,MAAO,UAAWC,MAAO,YAGvBC,EAAO,SAACC,EAAGC,GAAMC,OAAAA,KAAKC,UAAYF,EAAID,GAAKA,GAC3CI,EAAMR,EAAQS,OACdC,EAASC,SAASC,cAAc,SAChCC,EAAMF,SAASC,cAAc,UAAUE,WAAW,MAClDC,EAAMF,EAAIG,OAAOC,MACjBC,EAAMH,EAAM,EACZI,EAAKb,KAAKa,GACVC,EAAM,EAAID,EACVE,EAAMD,EAAMpB,EAAQS,OAEpBa,EAAW,KACbC,EAAS,EACTC,EAAM,EAEJC,EAAW,WAAMnB,OAAAA,KAAKoB,MAAMlB,EAAOgB,EAAMJ,EAAOZ,GAAOA,GAE7D,SAASmB,EAAWC,EAAQC,GACpBL,IAAAA,EAAMH,EAAMQ,EAClBhB,EAAIiB,OAEJjB,EAAIkB,YACJlB,EAAImB,UAAYJ,EAAO3B,MACvBY,EAAIoB,OAAOf,EAAKA,GAChBL,EAAIQ,IAAIH,EAAKA,EAAKA,EAAKM,EAAKA,EAAMH,GAClCR,EAAIqB,OAAOhB,EAAKA,GAChBL,EAAIsB,OAEJtB,EAAIuB,UAAUlB,EAAKA,GACnBL,EAAIwB,OAAOb,EAAMH,EAAM,GACvBR,EAAIyB,UAAY,QAChBzB,EAAImB,UAAY,OAChBnB,EAAI0B,KAAO,uBACX1B,EAAI2B,SAASZ,EAAO1B,MAAOgB,EAAM,GAAI,IAErCL,EAAI4B,UAGN,SAASJ,IACDT,IAAAA,EAAS5B,EAAQyB,KACvBZ,EAAIG,OAAO0B,MAAMC,UAAsBnB,UAAAA,OAAAA,EAAML,EAAK,EAAlD,QACAT,EAAOkC,YAAerB,EAAkBK,EAAO1B,MAAhB,OAC/BQ,EAAOgC,MAAMG,WAAajB,EAAO3B,MAGnC,SAAS6C,IACFvB,KACLA,GAAUD,GACG,OAAOC,EAAS,GAC7BC,GAAOD,EACPC,GAAOJ,EACPiB,KAGF,SAASU,IACPD,IACAE,sBAAsBD,GAGxB,SAASE,IACPjD,EAAQkD,QAAQvB,GAChBU,IACAU,IACArC,EAAOyC,iBAAiB,QAAS,WAC1B5B,IAAQA,EAASpB,EAAK,IAAM,QAIrC8C","file":"src.01cc479f.js","sourceRoot":"..","sourcesContent":["const sectors = [\n  { color: '#f82', label: 'Reda' },\n  { color: '#0bf', label: 'Romain' },\n  { color: '#fb0', label: 'Abdelazis' },\n  { color: '#0fb', label: 'Thierry' },\n  { color: '#b0f', label: 'Pierre' },\n  { color: '#f0b', label: 'Manison' },\n  { color: '#bf0', label: 'Alexandre' },\n  { color: '#007dbb', label: 'Gustavo' },\n  { color: '#00bb6d', label: 'Roberto' }\n]\n\nconst rand = (m, M) => Math.random() * (M - m) + m\nconst tot = sectors.length\nconst spinEl = document.querySelector('#spin')\nconst ctx = document.querySelector('#wheel').getContext('2d')\nconst dia = ctx.canvas.width\nconst rad = dia / 2\nconst PI = Math.PI\nconst TAU = 2 * PI\nconst arc = TAU / sectors.length\n\nconst friction = 0.991 // 0.995=soft, 0.99=mid, 0.98=hard\nlet angVel = 0 // Angular velocity\nlet ang = 0 // Angle in radians\n\nconst getIndex = () => Math.floor(tot - (ang / TAU) * tot) % tot\n\nfunction drawSector(sector, i) {\n  const ang = arc * i\n  ctx.save()\n  // COLOR\n  ctx.beginPath()\n  ctx.fillStyle = sector.color\n  ctx.moveTo(rad, rad)\n  ctx.arc(rad, rad, rad, ang, ang + arc)\n  ctx.lineTo(rad, rad)\n  ctx.fill()\n  // TEXT\n  ctx.translate(rad, rad)\n  ctx.rotate(ang + arc / 2)\n  ctx.textAlign = 'right'\n  ctx.fillStyle = '#fff'\n  ctx.font = 'bold 25px sans-serif'\n  ctx.fillText(sector.label, rad - 10, 10)\n  //\n  ctx.restore()\n}\n\nfunction rotate() {\n  const sector = sectors[getIndex()]\n  ctx.canvas.style.transform = `rotate(${ang - PI / 2}rad)`\n  spinEl.textContent = !angVel ? 'SPIN' : sector.label\n  spinEl.style.background = sector.color\n}\n\nfunction frame() {\n  if (!angVel) return\n  angVel *= friction // Decrement velocity by friction\n  if (angVel < 0.002) angVel = 0 // Bring to stop\n  ang += angVel // Update angle\n  ang %= TAU // Normalize angle\n  rotate()\n}\n\nfunction engine() {\n  frame()\n  requestAnimationFrame(engine)\n}\n\nfunction init() {\n  sectors.forEach(drawSector)\n  rotate() // Initial rotation\n  engine() // Start engine\n  spinEl.addEventListener('click', () => {\n    if (!angVel) angVel = rand(0.25, 0.45)\n  })\n}\n\ninit()\n"]}